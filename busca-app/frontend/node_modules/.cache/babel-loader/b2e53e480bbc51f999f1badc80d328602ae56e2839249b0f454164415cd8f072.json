{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cydyq\\\\Documents\\\\Python\\\\TesteCacaPreco\\\\cacapreco_ai\\\\busca-app\\\\frontend\\\\src\\\\pages\\\\VerificarEmail.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VerificarEmail = () => {\n  _s();\n  const navegar = useNavigate();\n  const localizacao = useLocation();\n  const [codigoVerificacao, setCodigoVerificacao] = useState('');\n  const [erro, setErro] = useState(null);\n  const [mensagem, setMensagem] = useState('');\n  const {\n    email\n  } = localizacao.state || {};\n  if (!email) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Erro: Email n\\xE3o encontrado. Por favor, \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/cadastro\",\n        children: \"comece o processo de cadastro novamente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 58\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 16\n    }, this);\n  }\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setErro(null);\n    setMensagem('');\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/autenticacao/verify-email`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          tokenConfirmacao: codigoVerificacao\n        })\n      });\n      const dados = await response.json();\n      if (response.ok) {\n        setMensagem('Conta ativada com sucesso! Redirecionando para o login...');\n        setTimeout(() => {\n          navegar('/login');\n        }, 3000);\n      } else {\n        setErro(dados.message || 'Ocorreu um erro ao verificar o código.');\n      }\n    } catch (error) {\n      setErro('Falha ao conectar com o servidor.');\n    }\n  };\n  const handleReenviarCodigo = async () => {\n    setErro(null);\n    setMensagem('');\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/autenticacao/resend-verification`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email\n        })\n      });\n      const dados = await response.json();\n      if (response.ok) {\n        setMensagem(dados.message + ' Por favor, verifique seu email e digite 123456.');\n      } else {\n        setErro(dados.message || 'Erro ao reenviar código.');\n      }\n    } catch (error) {\n      setErro('Falha ao conectar com o servidor.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Verifique seu Email\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Enviamos um c\\xF3digo de confirma\\xE7\\xE3o para \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 55\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Para fins de desenvolvimento, o c\\xF3digo \\xE9 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"123456\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 57\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: codigoVerificacao,\n        onChange: e => setCodigoVerificacao(e.target.value),\n        placeholder: \"Digite o c\\xF3digo de 6 d\\xEDgitos\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Verificar e Ativar Conta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), erro && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: erro\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 22\n    }, this), mensagem && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: mensagem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 26\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: handleReenviarCodigo,\n      style: {\n        marginTop: '10px'\n      },\n      children: \"Reenviar C\\xF3digo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(VerificarEmail, \"1LrBc1T+vi2065JoRUOAf6q8q8k=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = VerificarEmail;\nexport default VerificarEmail;\nvar _c;\n$RefreshReg$(_c, \"VerificarEmail\");","map":{"version":3,"names":["React","useState","useLocation","useNavigate","jsxDEV","_jsxDEV","VerificarEmail","_s","navegar","localizacao","codigoVerificacao","setCodigoVerificacao","erro","setErro","mensagem","setMensagem","email","state","children","href","fileName","_jsxFileName","lineNumber","columnNumber","handleSubmit","e","preventDefault","response","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","tokenConfirmacao","dados","json","ok","setTimeout","message","error","handleReenviarCodigo","onSubmit","type","value","onChange","target","placeholder","required","style","color","onClick","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/cydyq/Documents/Python/TesteCacaPreco/cacapreco_ai/busca-app/frontend/src/pages/VerificarEmail.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst VerificarEmail = () => {\n    const navegar = useNavigate();\n    const localizacao = useLocation();\n    const [codigoVerificacao, setCodigoVerificacao] = useState('');\n    const [erro, setErro] = useState(null);\n    const [mensagem, setMensagem] = useState('');\n\n    const { email } = localizacao.state || {};\n\n    if (!email) {\n        return <p>Erro: Email não encontrado. Por favor, <a href=\"/cadastro\">comece o processo de cadastro novamente</a>.</p>;\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setErro(null);\n        setMensagem('');\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/autenticacao/verify-email`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ email, tokenConfirmacao: codigoVerificacao }),\n            });\n\n            const dados = await response.json();\n\n            if (response.ok) {\n                setMensagem('Conta ativada com sucesso! Redirecionando para o login...');\n                setTimeout(() => {\n                    navegar('/login');\n                }, 3000); \n            } else {\n                setErro(dados.message || 'Ocorreu um erro ao verificar o código.');\n            }\n        } catch (error) {\n            setErro('Falha ao conectar com o servidor.');\n        }\n    };\n\n    const handleReenviarCodigo = async () => {\n        setErro(null);\n        setMensagem('');\n        try {\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/autenticacao/resend-verification`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ email }),\n            });\n            const dados = await response.json();\n            if (response.ok) {\n                setMensagem(dados.message + ' Por favor, verifique seu email e digite 123456.');\n            } else {\n                setErro(dados.message || 'Erro ao reenviar código.');\n            }\n        } catch (error) {\n            setErro('Falha ao conectar com o servidor.');\n        }\n    };\n\n    return (\n        <div>\n            <h2>Verifique seu Email</h2>\n            <p>Enviamos um código de confirmação para <strong>{email}</strong>.</p>\n            <p>Para fins de desenvolvimento, o código é <strong>123456</strong>.</p>\n            \n            <form onSubmit={handleSubmit}>\n                <input \n                    type=\"text\" \n                    value={codigoVerificacao} \n                    onChange={(e) => setCodigoVerificacao(e.target.value)} \n                    placeholder=\"Digite o código de 6 dígitos\" \n                    required \n                />\n                <button type=\"submit\">Verificar e Ativar Conta</button>\n            </form>\n\n            {erro && <p style={{ color: 'red' }}>{erro}</p>}\n            {mensagem && <p style={{ color: 'green' }}>{mensagem}</p>}\n\n            <button type=\"button\" onClick={handleReenviarCodigo} style={{ marginTop: '10px' }}>\n                Reenviar Código\n            </button>\n        </div>\n    );\n};\n\nexport default VerificarEmail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}